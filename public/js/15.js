(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1050:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),a=n(771),i=n(772),c=n(770),l=n(769),u=n(161),f=n.n(u),s=n(160),p=n(760),g=n(759);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function y(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}function w(e,t){return(w=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}var I=function(e){function t(e){var n;return d(this,t),(n=y(this,S(t).call(this,e))).fetchMediaServerListData=function(e){var t="newest",r={timeRange:{start:"newest"}};Object(p.h)(r,function(t){n.updateMediaServerData(t,e)})},n.onChangePage=function(e){n.fetchMediaServerListData(e)},n.renderOperations=function(e,t,n){return o.a.createElement("div",{className:"operation-table-operation"},o.a.createElement(g.a,{to:"/DeviceDetailInfo?deviceName="+n.hostname,className:E.action},"\u4e3b\u673a\u8be6\u60c5"))},n.state={},n.state.tableData={org:[],total:0,pageSize:8,currentPage:1,list:[]},n}return x(t,e),v(t,[{key:"componentDidMount",value:function e(){var t=this;this.fetchMediaServerListData(1);var n=function e(){t.fetchMediaServerListData(t.state.tableData.currentPage)};this.interval=setInterval(n,3e3)}},{key:"componentWillUnmount",value:function e(){clearInterval(this.interval)}},{key:"updateMediaServerData",value:function e(t,n){var r=this.state.tableData;if(null!=t){var o=[];s.a.ganerateListFromTree(t,o,1),r.org=o,r.total=o.length,r.currentPage=n,r.list=s.a.getCurrentPageDataList(o,n,r.pageSize),this.setState({tableData:r})}else r.total=0,r.currentPage=1,r.org=[],r.list=[],this.setState({tableData:r})}},{key:"renderMediaList",value:function e(){var t=this.state.tableData;return o.a.createElement("div",{className:"operation-table"},o.a.createElement(f.a,{style:E.cardContainer},o.a.createElement("h3",{style:E.subTitle},"MDS\u670d\u52a1\u5668\u5217\u8868:"),o.a.createElement(l.a,{dataSource:t.list,className:"basic-table",style:E.basicTable,hasBorder:!1},o.a.createElement(l.a.Column,{title:"\u4e3b\u673a\u540d\u79f0",dataIndex:"hostname",width:180,alignHeader:"left",align:"left"}),o.a.createElement(l.a.Column,{title:"\u4e3b\u673aIP",dataIndex:"ip",width:150,alignHeader:"left",align:"left"}),o.a.createElement(l.a.Column,{title:"\u89c6\u9891\u6d41\u6570",dataIndex:"video",width:120,alignHeader:"center",align:"center"}),o.a.createElement(l.a.Column,{title:"\u97f3\u9891\u6d41\u6570",dataIndex:"video",width:120,alignHeader:"center",align:"center"}),o.a.createElement(l.a.Column,{title:"\u89c6\u9891\u6d41\u9650\u5236\u6570",dataIndex:"videoLimit",width:120,alignHeader:"center",align:"center"}),o.a.createElement(l.a.Column,{title:"\u97f3\u9891\u6d41\u9650\u5236\u6570",dataIndex:"audioLimit",width:120,alignHeader:"center",align:"center"}),o.a.createElement(l.a.Column,{title:"\u64cd\u4f5c",dataIndex:"operation",width:150,align:"center",cell:this.renderOperations})),o.a.createElement("div",{style:E.paginationContainer},o.a.createElement(i.a,{current:t.currentPage,pageSize:t.pageSize,total:t.total,onChange:this.onChangePage}))))}},{key:"render",value:function e(){return o.a.createElement(f.a,{style:E.cardContainer},o.a.createElement("div",{style:{width:"95%",height:"95%"}},o.a.createElement("hr",null),this.renderMediaList()))}}]),t}(r.Component);I.displayName="MediaServerList",I.propTypes={},I.defaultProps={};var E={cardContainer:{padding:"10px 10px 20px 10px"},editDialog:{display:"inline-block",marginRight:"5px"},loading:{width:"100%"},header:{display:"flex",justifyContent:"space-between",borderBottom:"1px solid #999"},title:{fontSize:20,margin:0,paddingBottom:10},subTitle:{fontSize:16,fontWeight:"bold",margin:0,marginTop:"20px"},secondLine:{marginTop:"10px"},anchorCard:{marginTop:"10px",marginLeft:"20px",background:"#fff",overflow:"hidden",textOverflow:"ellipsis",borderRadius:"4px",display:"flex"},anchorAvatar:{display:"block"},anchorInfoBody:{position:"absolute",left:"0",right:"0",bottom:"0",width:"100%",textAlign:"center",fontSize:"12px"},infoItemBody:{display:"flex",margin:"11px 0"},infoItemLabel:{color:"#000",fontSize:"14px",fontWeight:"bold",marginRight:"2px",minWidth:"64px"},infoItemValue:{marginLeft:"5px",color:"#333",fontSize:"14px"},infoItemTitle:{float:"left",maxWidth:"240px",padding:"0 20px",fontSize:"14px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},infoItemPrice:{float:"right",width:"100px",textAlign:"right",color:"#fe5c38",fontSize:"20px",marginRight:"10px"},contentText:{display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"}};function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t,n){return t&&C(e.prototype,t),n&&C(e,n),e}function j(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?L(e):t}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}n.d(t,"default",function(){return T});var T=function(e){function t(e){var n;return D(this,t),(n=j(this,M(t).call(this,e))).state={},n}return N(t,e),P(t,[{key:"render",value:function e(){return o.a.createElement("div",{className:"MediaList-page"},o.a.createElement(I,null))}}]),t}(r.Component)},760:function(e,t,n){"use strict";n.d(t,"k",function(){return m}),n.d(t,"f",function(){return d}),n.d(t,"d",function(){return h}),n.d(t,"g",function(){return v}),n.d(t,"h",function(){return b}),n.d(t,"c",function(){return S}),n.d(t,"a",function(){return x}),n.d(t,"l",function(){return w}),n.d(t,"e",function(){return I}),n.d(t,"i",function(){return E}),n.d(t,"j",function(){return D}),n.d(t,"b",function(){return C});var r=n(42),o=n.n(r),a=n(129),i=n.n(a),c=n(764),l=n.n(c),u=n(160);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}var s=[],p=[],g=[],m=function e(t){o.a.get("/rimpmanage/roomList").then(function(e){var n=e.data;"SUCCESS"===(n=n.response).returncode?(t(n),"object"==f(n.meetings.meeting)&&(s=n.meetings.meeting.constructor!=Array?[n.meetings.meeting]:s)):(s=[],t(null)),sessionStorage.setItem("meetingsData",JSON.stringify(s))}).catch(function(e){console.log("fetch course appprove list error.",e),t(null)})},d=function e(t){o.a.get("/rimpmanage/roomList/historyRoomList").then(function(e){var n=e.data;p=n,t(n),sessionStorage.setItem("historyMeetings",JSON.stringify(p))}).catch(function(e){console.log("getHistoryMeetingsfromServer list error.",e),t(null)})},h=function e(t,n){o.a.get("/rimpmanage/eventList?meetId="+t).then(function(e){var t=e.data;n(t)}).catch(function(e){console.log("getEventsfromServer error.",e),n(null)})},v=function e(t,n){o.a.post("/rimpmanage/mediaInfo/getMediaInfo",t).then(function(e){var t=e.data;n(t)}).catch(function(e){console.log("getEventsfromServer error.",e),n(null)})},y=function e(t){return new Promise(function(e,n){o.a.post("/rimpmanage/DeviceInfo/processesRestartInfo",t).then(function(t){var n=t.data;e(n)}).catch(function(e){console.log("getProcessRestartInfo error.",e),n(e)})})},b=function e(t,n){o.a.post("/rimpmanage/mediaInfo/mediaServers",t).then(function(e){var t=e.data;n(t)}).catch(function(e){console.log("getEventsfromServer error.",e),n(null)})},S=function e(t){o.a.get("/rimpmanage/DeviceInfo").then(function(e){var n=e.data;t(n),g=n,sessionStorage.setItem("DeviceInfo",JSON.stringify(n))}).catch(function(e){console.log("getDeviceInfosfromServer error.",e),t(null)})},x=function e(t,n){o.a.post("/rimpmanage/countInfo",t).then(function(e){var t=e.data;n(t)}).catch(function(e){console.log("getCountInfosfromServer error.",e),n(null)})},w=function e(t,n){o.a.post("/rimpmanage/countInfo/processRestartEvent",t).then(function(e){var t=e.data;n(t)}).catch(function(e){console.log("geProcessRestartEvent error.",e),n(null)})},I=function e(t){var n=null,r=[];if(p.length<=0){var o=sessionStorage.getItem("historyMeetings");r=JSON.parse(o)}else r=p;return r.forEach(function(e){e.meetId==t&&(n=e)}),n},E=function e(t){var n=null,r=[];if(s.length<=0){var o=sessionStorage.getItem("meetingsData");r=JSON.parse(o)}else r=s;return r.forEach(function(e){e.internalMeetingID==t&&(n=e)}),n},O=function e(t,n){var r=null,o=[];if(s.length<=0){var a=sessionStorage.getItem("meetingsData");o=JSON.parse(a)}else o=s;return o.forEach(function(e){var o;e.voiceBridge.toString()===t&&u.a.tranObjToArr(e.attendees.attendee).forEach(function(e){e.userID===n&&(r=e.fullName)})}),r},D=function e(t){var n=[];if(s.length<=0){var r=sessionStorage.getItem("meetingsData");n=JSON.parse(r)}else n=s;var o="";return n.forEach(function(e){e.voiceBridge.toString()===t&&(o=e.meetingName)}),o},C=function e(t){var n=null,r=[];if(g.length<=0){var o=sessionStorage.getItem("deviceInfo");r=JSON.parse(o)}else r=g;return null==r?null:(r.forEach(function(e){e.hostname===t&&(n=e)}),n)},P=m}}]);