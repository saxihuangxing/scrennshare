(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1044:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(775),i=n(778),l=n(774),c=n(773),u=n(162),s=n(60),f=n(161),m=n.n(f),p=n(760),d=n(761),g=n(131),y=n(41),h=n(163),v=n(55),b=n(112),E=n(25),S=n(312),O=n(154),w=n(313),x=n(205),I=n(314),P=n(206),M=n(42),k=n(129),D=n(160),C=n(14);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t,n){return t&&L(e.prototype,t),n&&L(e,n),e}function _(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?V(e):t}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}function z(e,t){return(z=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}var B=P.a.Panel,H=x.a.Item,J=s.a.Row,W=s.a.Col,Y={0:"\u5168\u90e8",1:"\u63a8",2:"\u62c9"},$=function(e){function t(e){var n;return N(this,t),(n=_(this,U(t).call(this,e))).searchSubmit=function(){n.field.validate(function(e,t){e?console.log("Errors in form!!!"):(console.log("searchSubmit=>",t),n.props.onSubmit&&n.props.onSubmit(t))})},n.searchReset=function(){n.field.reset()},n.field=new O.a(V(n)),n}return A(t,e),R(t,[{key:"componentDidMount",value:function e(){console.log("search >>> componentDidMount")}},{key:"render",value:function e(){var t=this.field.init;return a.a.createElement(P.a,{defaultExpandedKeys:["0"]},a.a.createElement(B,{title:"\u641c\u7d22"},a.a.createElement(x.a,{field:this.field,labelTextAlign:"left"},a.a.createElement(J,{wrap:!0},a.a.createElement(W,{xxs:"24",l:"8",style:F.formCol},a.a.createElement(H,j({},F.formItemLayout,{label:"\u623f\u95f4\u540d\u79f0:"}),a.a.createElement(E.a,j({},t("meetingName"),{style:{width:"100%"}})))),a.a.createElement(W,{xxs:"24",l:"8",style:F.formCol},a.a.createElement(H,j({},F.formItemLayout,{label:"\u7528\u6237\u540d\u79f0:"}),a.a.createElement(E.a,t("userName")))),a.a.createElement(W,{xxs:"24",l:"8",style:F.formCol},a.a.createElement(H,j({},F.formItemLayout,{label:"\u65b9\u5f0f:"}),a.a.createElement(v.a,j({name:"streamType",style:{width:"100%"}},t("streamType"),{dataSource:D.a.generateMapToArray(Y,"value","label")})))),a.a.createElement(W,{xxs:"24",l:"8",style:F.formCol},a.a.createElement(y.a,{onClick:this.searchSubmit,type:"primary",style:{marginLeft:30}},"\u641c\u7d22"),"\xa0\xa0\xa0",a.a.createElement(y.a,{onClick:this.searchReset,type:"primary"},"\u91cd\u7f6e"))))))}}]),t}(r.Component);$.displayName="RoomSearch",$.propTypes={},$.defaultProps={};var F={formCol:{display:"flex",alignItems:"left"},label:{lineHeight:"28px",paddingRight:"10px"},formItemLayout:{labelCol:{fixedSpan:4},wrapperCol:{span:22}}},q=n(765),K=n(759);function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t,n){return t&&X(e.prototype,t),n&&X(e,n),e}function ee(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?te(e):t}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function re(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}function ae(e,t){return(ae=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}var oe=s.a.Row,ie=s.a.Col,le=function(e){function t(e){var n;return G(this,t),(n=ee(this,ne(t).call(this,e))).fetchMediaInfoListData=function(e){var t="newest",r={timeRange:{start:"newest"}};Object(p.e)(r,function(t){n.updateMediaData(t,e)})},n.onChangePage=function(e){n.fetchMediaInfoListData(e)},n.renderOperations=function(e,t,n){var r="/MediaDetailInfo?voiceBridge=".concat(n.voiceBridge,"&userId=").concat(n.userId,"&mediaId=").concat(n.mediaId);return a.a.createElement("div",{className:"operation-table-operation"},a.a.createElement(K.a,{to:r,className:ce.action},"\u67e5\u770b\u8be6\u60c5"))},n.state={},n.filterParam={},n.state.tableData={org:[],total:0,pageSize:8,currentPage:1,list:[]},n}return re(t,e),Z(t,[{key:"componentDidMount",value:function e(){var t=this;this.fetchMediaInfoListData(1);var n=function e(){t.fetchMediaInfoListData(t.state.tableData.currentPage)};this.interval=setInterval(n,3e3)}},{key:"componentWillUnmount",value:function e(){clearInterval(this.interval)}},{key:"updateMediaData",value:function e(t,n){var r=this.state.tableData;if(null!=t){var a=[];D.a.ganerateListFromTree(t,a,1),r.org=a,a=this.filterMediaList(a),r.total=a.length,r.currentPage=n,r.list=D.a.getCurrentPageDataList(a,n,r.pageSize),this.setState({tableData:r})}else r.total=0,r.currentPage=1,r.org=[],r.list=[],this.setState({tableData:r}),console.log("fetch course appprove list failed.",t)}},{key:"getQueryVariable",value:function e(t){for(var n,r,a=window.location.toString().split("?")[1].split("&"),o=0;o<a.length;o++){var i=a[o].split("=");if(i[0]==t)return i[1]}return!1}},{key:"getStatMapValue",value:function e(t,n,r,a){var o,i;if(null!=t.statsMap&&t.statsMap.constructor===Array){if(t.statsMap.length<=0)return void console.error("hxtest renderPackgeReceive record.statsMap.length = ".concat(t.statsMap.length));o=t.statsMap}else o=[t.statsMap];if(void 0!=a&&null!=a){var l;for(l=0;l<o.length;l++)if(o[l].mediaType===a){i=o[l];break}if(l==o.length)return}else i=o[0];var c="-";for(var u in i)if(i.hasOwnProperty(u)){var s=i[u];if(null==n){if(r in s){c=s[r];break}}else if(s.__type__==n){c=s[r];break}}return c}},{key:"renderPackgeReceive",value:function e(t,n,r){var o=this.getStatMapValue(r,"RTCInboundRTPStreamStats","packetsReceived","VIDEO"),i=this.getStatMapValue(r,"RTCInboundRTPStreamStats","packetsReceived","AUDIO"),l=!0;return a.a.createElement("div",null,a.a.createElement("div",null,o),a.a.createElement("div",{style:ce.secondLine},i))}},{key:"renderREMB",value:function e(t,n,r){var o=this.getStatMapValue(r,null,"remb","VIDEO"),i=this.getStatMapValue(r,null,"remb","AUDIO");return a.a.createElement("div",null,a.a.createElement("div",null,o),a.a.createElement("div",{style:ce.secondLine},i))}},{key:"renderMediaType",value:function e(t,n,r){return a.a.createElement("div",null,a.a.createElement("div",null,"\u89c6\u9891"),a.a.createElement("div",{style:ce.secondLine},"\u97f3\u9891"))}},{key:"renderPackgeSend",value:function e(t,n,r){var o=this.getStatMapValue(r,"RTCOutboundRTPStreamStats","packetsSent","VIDEO"),i=this.getStatMapValue(r,"RTCOutboundRTPStreamStats","packetsSent","AUDIO");return a.a.createElement("div",null,a.a.createElement("div",null,o),a.a.createElement("div",{style:ce.secondLine},i))}},{key:"renderPackgeLost",value:function e(t,n,r){var o=this.getStatMapValue(r,null,"packetsLost","VIDEO"),i=this.getStatMapValue(r,null,"packetsLost","AUDIO");return a.a.createElement("div",null,a.a.createElement("div",null,o),a.a.createElement("div",{style:ce.secondLine},i))}},{key:"renderUserName",value:function e(t,n,r){var o=r.userName;if(!r.shared){var i=r.selfUserName;o="".concat(i," <-- ").concat(o)}return a.a.createElement("div",null,o)}},{key:"renderMeetingName",value:function e(t,n,r){var o=Object(p.h)(r.voiceBridge);return a.a.createElement("div",null,o)}},{key:"renderUserID",value:function e(t,n,r){var o=r.userId;return r.shared||(o=r.selfUserId),a.a.createElement("div",null,o)}},{key:"renderMeans",value:function e(t,n,r){var o=r.shared?"\u63a8":"\u62c9";return a.a.createElement("div",null,o)}},{key:"filterMediaList",value:function e(t){var n=this,r;return null==this.filterParam||0===Object.keys(this.filterParam).length?t:t.filter(function(e){if(void 0!==n.filterParam.meetingName&&(void 0===e.meetingName||e.meetingName.indexOf(n.filterParam.meetingName)<0))return!1;if(void 0!==n.filterParam.userName&&(void 0===e.meetingName||e.selfUserName.indexOf(n.filterParam.userName)<0))return!1;var t;if(void 0!==n.filterParam.streamType&&"0"!==n.filterParam.streamType&&(e.shared?"1":"2")!=n.filterParam.streamType)return!1;return!0})}},{key:"fetchMediasListData",value:function e(t){this.filterParam=t,this.updateMediaData(this.state.tableData.org,1)}},{key:"renderMediaList",value:function e(){var t=this.state.tableData;return a.a.createElement("div",{className:"operation-table"},a.a.createElement(m.a,{style:ce.cardContainer},a.a.createElement($,{onSubmit:this.fetchMediasListData.bind(this)})),a.a.createElement(m.a,{style:ce.cardContainer},a.a.createElement("h3",{style:ce.subTitle},"\u5a92\u4f53\u6d41\u5217\u8868:"),a.a.createElement(c.a,{dataSource:t.list,className:"basic-table",style:ce.basicTable,hasBorder:!1},a.a.createElement(c.a.Column,{title:"\u623f\u95f4\u540d\u79f0",dataIndex:"meetingName",width:150,alignHeader:"left",align:"left"}),a.a.createElement(c.a.Column,{title:"\u7528\u6237",dataIndex:"userId",width:150,alignHeader:"left",align:"left",cell:this.renderUserName}),a.a.createElement(c.a.Column,{title:"\u7528\u6237ID",dataIndex:"userId",width:170,alignHeader:"left",align:"left",cell:this.renderUserID}),a.a.createElement(c.a.Column,{title:"\u65b9\u5f0f",dataIndex:"means",width:120,alignHeader:"center",align:"center",cell:this.renderMeans.bind(this)}),a.a.createElement(c.a.Column,{title:"\u7c7b\u578b",dataIndex:"role",width:85,cell:this.renderMediaType.bind(this)}),a.a.createElement(c.a.Column,{title:"\u53d1\u5305\u6570",width:85,cell:this.renderPackgeSend.bind(this)}),a.a.createElement(c.a.Column,{title:"\u6536\u5305\u6570",width:85,cell:this.renderPackgeReceive.bind(this)}),a.a.createElement(c.a.Column,{title:"\u4e22\u5305\u6570",width:85,cell:this.renderPackgeLost.bind(this)}),a.a.createElement(c.a.Column,{title:"\u64cd\u4f5c",dataIndex:"operation",width:150,align:"center",cell:this.renderOperations})),a.a.createElement("div",{style:ce.paginationContainer},a.a.createElement(i.a,{current:t.currentPage,pageSize:t.pageSize,total:t.total,onChange:this.onChangePage}))))}},{key:"rendeEventType",value:function e(t,n,r){return a.a.createElement("div",null,D.a.mappedEventMsg(t))}},{key:"rendeEventUserName",value:function e(t,n,r){for(var o=this.state.tableData.org,i="\u65e0",l=0;l<o.length;l++)if(o[l].userID==t){i=o[l].fullName;break}return a.a.createElement("div",null,i)}},{key:"render",value:function e(){return a.a.createElement(m.a,{style:ce.cardContainer},a.a.createElement("div",{style:{width:"95%",height:"95%"}},a.a.createElement("hr",null),this.renderMediaList()))}}]),t}(r.Component);le.displayName="WebrtcMediaInfo",le.propTypes={},le.defaultProps={};var ce={cardContainer:{padding:"10px 10px 20px 10px"},editDialog:{display:"inline-block",marginRight:"5px"},loading:{width:"100%"},header:{display:"flex",justifyContent:"space-between",borderBottom:"1px solid #999"},title:{fontSize:20,margin:0,paddingBottom:10},subTitle:{fontSize:16,fontWeight:"bold",margin:0,marginTop:"20px"},secondLine:{marginTop:"10px"},anchorCard:{marginTop:"10px",marginLeft:"20px",background:"#fff",overflow:"hidden",textOverflow:"ellipsis",borderRadius:"4px",display:"flex"},anchorAvatar:{display:"block"},anchorInfoBody:{position:"absolute",left:"0",right:"0",bottom:"0",width:"100%",textAlign:"center",fontSize:"12px"},infoItemBody:{display:"flex",margin:"11px 0"},infoItemLabel:{color:"#000",fontSize:"14px",fontWeight:"bold",marginRight:"2px",minWidth:"64px"},infoItemValue:{marginLeft:"5px",color:"#333",fontSize:"14px"},infoItemTitle:{float:"left",maxWidth:"240px",padding:"0 20px",fontSize:"14px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},infoItemPrice:{float:"right",width:"100px",textAlign:"right",color:"#fe5c38",fontSize:"20px",marginRight:"10px"},contentText:{display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"}};function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e,t,n){return t&&fe(e.prototype,t),n&&fe(e,n),e}function pe(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?de(e):t}function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function ye(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}function he(e,t){return(he=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}n.d(t,"default",function(){return ve});var ve=function(e){function t(e){var n;return se(this,t),(n=pe(this,ge(t).call(this,e))).state={},n}return ye(t,e),me(t,[{key:"render",value:function e(){return a.a.createElement("div",{className:"MediaList-page"},a.a.createElement(le,null))}}]),t}(r.Component)},760:function(e,t,n){"use strict";n.d(t,"i",function(){return p}),n.d(t,"d",function(){return d}),n.d(t,"e",function(){return g}),n.d(t,"f",function(){return y}),n.d(t,"c",function(){return h}),n.d(t,"a",function(){return v}),n.d(t,"g",function(){return b}),n.d(t,"h",function(){return S}),n.d(t,"b",function(){return O});var r=n(42),a=n.n(r),o=n(129),i=n.n(o),l=n(766),c=n.n(l),u=n(160);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}var f=[],m=[],p=function e(t){a.a.get("/rimpmanage/roomList").then(function(e){var n=e.data;"SUCCESS"===(n=n.response).returncode?(t(n),"object"==s(n.meetings.meeting)&&(f=n.meetings.meeting.constructor!=Array?[n.meetings.meeting]:f)):(f=[],t(null)),sessionStorage.setItem("meetingsData",JSON.stringify(f))}).catch(function(e){console.log("fetch course appprove list error.",e),t(null)})},d=function e(t,n){a.a.get("/rimpmanage/eventList?meetId="+t).then(function(e){var t=e.data;n(t)}).catch(function(e){console.log("getEventsfromServer error.",e),n(null)})},g=function e(t,n){a.a.post("/rimpmanage/mediaInfo/getMediaInfo",t).then(function(e){var t=e.data;n(t)}).catch(function(e){console.log("getEventsfromServer error.",e),n(null)})},y=function e(t,n){a.a.post("/rimpmanage/mediaInfo/mediaServers",t).then(function(e){var t=e.data;n(t)}).catch(function(e){console.log("getEventsfromServer error.",e),n(null)})},h=function e(t){a.a.get("/rimpmanage/DeviceInfo").then(function(e){var n=e.data;t(n),m=n,sessionStorage.setItem("DeviceInfo",JSON.stringify(n))}).catch(function(e){console.log("getDeviceInfosfromServer error.",e),t(null)})},v=function e(t){a.a.get("/rimpmanage/countInfo").then(function(e){var n=e.data;t(n)}).catch(function(e){console.log("getCountInfosfromServer error.",e),t(null)})},b=function e(t){var n=null,r=[];if(f.length<=0){var a=sessionStorage.getItem("meetingsData");r=JSON.parse(a)}else r=f;return r.forEach(function(e){e.internalMeetingID==t&&(n=e)}),n},E=function e(t,n){var r=null,a=[];if(f.length<=0){var o=sessionStorage.getItem("meetingsData");a=JSON.parse(o)}else a=f;return a.forEach(function(e){var a;e.voiceBridge.toString()===t&&u.a.tranObjToArr(e.attendees.attendee).forEach(function(e){e.userID===n&&(r=e.fullName)})}),r},S=function e(t){var n=[];if(f.length<=0){var r=sessionStorage.getItem("meetingsData");n=JSON.parse(r)}else n=f;var a="";return n.forEach(function(e){e.voiceBridge.toString()===t&&(a=e.meetingName)}),a},O=function e(t){var n=null,r=[];if(m.length<=0){var a=sessionStorage.getItem("deviceInfo");r=JSON.parse(a)}else r=m;return null==r?null:(r.forEach(function(e){e.hostname===t&&(n=e)}),n)},w=p},761:function(e,t,n){"use strict";var r=n(14),a=n.n(r),o={dateFormat:function e(t,n){var r={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?r[a]:("00"+r[a]).substr((""+r[a]).length)));return t},formatUtcTime:function e(t,n){var r=null,o="\u2014";if(r=new Date(t)){var i=a()(r.getTime()+6e4*n);o=i?i.format("YYYY-MM-DD HH:mm:ss"):{convertTime:t}+" "+{offset:n}}else o={convertTime:t}+" "+{offset:n};return o}};t.a=o},765:function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(761);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(n,!0).forEach(function(t){c(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){return e?o.a.formatUtcTime(e,0):a.a.createElement("span",{style:l({},s.contentText)},"No Time")}var s={contentText:{display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"}};t.a=u}}]);