(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1045:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(771),i=n(772),l=n(770),c=n(769),u=n(162),s=n(60),f=n(161),m=n.n(f),p=n(760),g=n(761),d=n(160),h=n(763),y=n(131),v=n(41),b=n(112),E=n(25),S=n(309),x=n(132),w=n(310),O=n(165),P=n(311),I=n(166),T=n(42),C=n(129),D=n(14),j=n(164);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t,n){return t&&N(e.prototype,t),n&&N(e,n),e}function _(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?H(e):t}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}function J(e,t){return(J=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}var A=I.a.Panel,U=O.a.Item,V=s.a.Row,Y=s.a.Col,F=function(e){function t(e){var n;return k(this,t),(n=_(this,z(t).call(this,e))).searchReset=function(){n.field.reset(),n.onEventTextChange()},n.field=new x.a(H(n)),n}return B(t,e),R(t,[{key:"componentDidMount",value:function e(){console.log("search >>> componentDidMount")}},{key:"onEventTextChange",value:function e(){var t=this;this.field.validate(function(e,n){if(e)console.log("Errors in form!!!");else{console.log("searchSubmit=>",n);var r={};r.eventText=n.eventText,r.userName=n.userName,t.props.setEventSearchParam(r)}})}},{key:"render",value:function e(){var t=this.field.init;return a.a.createElement(I.a,{defaultExpandedKeys:["0"]},a.a.createElement(A,{title:"EVENT\u7b5b\u9009"},a.a.createElement(O.a,{field:this.field,labelTextAlign:"left"},a.a.createElement(V,{wrap:!0},a.a.createElement(Y,{xxs:"24",l:"10",style:W.formCol},a.a.createElement(U,M({},W.formItemLayout,{label:"\u4e8b\u4ef6\u7c7b\u578b:"}),a.a.createElement(E.a,M({hasClear:!0},t("eventText"),{maxLength:100})))),a.a.createElement(Y,{xxs:"24",l:"10",style:W.formCol},a.a.createElement(U,M({},W.formItemLayout,{label:"\u7528\u6237\u540d\u79f0:"}),a.a.createElement(E.a,M({hasClear:!0},t("userName"),{maxLength:100})))),a.a.createElement(Y,{xxs:"24",l:"8",style:W.formCol},a.a.createElement(v.a,{onClick:this.onEventTextChange.bind(this),type:"primary",style:{marginLeft:60}},"\u641c\u7d22"),"\xa0\xa0\xa0",a.a.createElement(v.a,{onClick:this.searchReset,type:"primary"},"\u91cd\u7f6e"))))))}}]),t}(r.Component);F.displayName="RoomSearch",F.propTypes={},F.defaultProps={};var W={formCol:{display:"flex",alignItems:"left"},label:{lineHeight:"28px",paddingRight:"10px"},formItemLayout:{labelCol:{fixedSpan:4},wrapperCol:{span:22}}};function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t,n){return t&&q(e.prototype,t),n&&q(e,n),e}function G(e,t){return!t||"object"!==$(t)&&"function"!=typeof t?X(e):t}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function ee(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}function te(e,t){return(te=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}var ne=s.a.Row,re=s.a.Col,ae=function(e){function t(e){var n;Q(this,t),(n=G(this,Z(t).call(this,e))).fetchEventListData=function(e){Object(p.d)(n.state.meeting.meetId,function(t){var r=n.state.tableEventData;if(null!=t){var a=[];d.a.ganerateListFromTree(t,a,1),a.forEach(function(e){e.fakeType=d.a.mappedEventMsg(e.type)}),a.sort(function(e,t){return t.time-e.time}),r.total=a.length,r.currentPage=e,r.org=a,r.filterList=a,r.list=d.a.getCurrentPageDataList(a,e,r.pageSize),n.setState({tableEventData:r})}else r.total=0,r.currentPage=1,r.org=[],r.list=[],n.setState({tableEventData:r}),console.log("fetch course appprove list failed.",t)})},n.fetchMediaListData=function(e){var t={roomId:n.state.meeting.meetId};Object(p.g)(t,function(t){var r=n.state.tableMediaData;if(null!=t){var a=[];d.a.ganerateListFromTree(t,a,1),a.sort(function(e,t){return t.time-e.time}),r.total=a.length,r.currentPage=e,r.org=a,r.filterList=a,r.list=d.a.getCurrentPageDataList(a,e,r.pageSize),n.setState({tableMediaData:r})}else r.total=0,r.currentPage=1,r.org=[],r.list=[],n.setState({tableMediaData:r}),console.log("fetchMediaListData  failed.",t)})},n.renderRoomInfo=function(e){return a.a.createElement("div",null,a.a.createElement("h3",{style:oe.subTitle},"\u623f\u95f4\u4fe1\u606f:"),a.a.createElement(ne,{style:oe.anchorCard},a.a.createElement(re,{l:"6"},n.renderTextColum("\u623f\u95f4\u540d\u79f0",e.meetName)),a.a.createElement(re,{l:"6"},n.renderTextColum("\u5f00\u59cb\u65f6\u95f4",g.a.formatUtcTime(e.createTime,0))),a.a.createElement(re,{l:"6"},n.renderTextColum("\u7ed3\u675f\u65f6\u95f4",g.a.formatUtcTime(e.endTime,0)))))},n.onChangeEventPage=function(e){n.changePage(n.state.tableEventData,e)},n.onChangeMediaPage=function(e){n.changePage(n.state.tableMediaData,e)};var r=n.getQueryVariable("meetingId");n.state={};var o=Object(p.e)(r);return n.state.meeting=o,n.state.tableMediaData={org:[],total:0,pageSize:5,currentPage:1,list:[]},n.state.tableEventData={org:[],total:0,pageSize:5,currentPage:1,list:[]},n}return ee(t,e),K(t,[{key:"componentDidMount",value:function e(){this.fetchEventListData(1),this.fetchMediaListData(1)}},{key:"getQueryVariable",value:function e(t){for(var n,r,a=window.location.toString().split("?")[1].split("&"),o=0;o<a.length;o++){var i=a[o].split("=");if(i[0]==t)return i[1]}return!1}},{key:"renderTextColum",value:function e(t,n){return a.a.createElement("li",{style:oe.infoItemBody},a.a.createElement("span",{style:oe.infoItemLabel},t,":"),a.a.createElement("span",{style:oe.infoItemValue},n&&""!=n?n:"\u2014"))}},{key:"setEventSearchParam",value:function e(t){var n=this.state.tableEventData;n.filterList=n.org.filter(function(e){var n=!1,r=!1;return null==t||null==t.eventText||""===t.eventText?n=!0:e.fakeType.indexOf(t.eventText)>-1&&(n=!0),null==t.userName||""===t.userName?r=!0:"string"==typeof e.userName&&e.userName.indexOf(t.userName)>-1&&(r=!0),n&&r}),n.currentPage=1,n.total=n.filterList.length,n.list=d.a.getCurrentPageDataList(n.filterList,n.currentPage,n.pageSize),this.setState({tableEventData:n})}},{key:"changePage",value:function e(t,n){t.list=d.a.getCurrentPageDataList(t.filterList,n,t.pageSize),t.currentPage=n,this.setState({tableEventData:t})}},{key:"renderEventList",value:function e(){var t,n=this.state.tableEventData;return a.a.createElement(m.a,{style:oe.cardContainer},a.a.createElement(F,{setEventSearchParam:this.setEventSearchParam.bind(this)}),a.a.createElement("h3",{style:oe.subTitle},"\u4e8b\u4ef6\u5217\u8868:"),a.a.createElement(c.a,{dataSource:n.list,className:"basic-table",style:oe.basicTable,hasBorder:!1},a.a.createElement(c.a.Column,{title:"\u65f6\u95f4",dataIndex:"time",width:120,alignHeader:"center",align:"center",cell:function e(t,n,r){return Object(h.a)(r.time,0)}}),a.a.createElement(c.a.Column,{title:"\u7528\u6237",dataIndex:"userName",width:120,alignHeader:"center",align:"center"}),a.a.createElement(c.a.Column,{title:"\u4e8b\u4ef6",dataIndex:"fakeType",width:150,alignHeader:"left",align:"left"})),a.a.createElement("div",{style:oe.paginationContainer},a.a.createElement(i.a,{current:n.currentPage,pageSize:n.pageSize,total:n.total,onChange:this.onChangeEventPage})))}},{key:"renderMediaList",value:function e(){var t,n=this.state.tableMediaData;return a.a.createElement("div",null,a.a.createElement("h3",{style:oe.subTitle},"\u5a92\u4f53\u6d41\u5217\u8868:"),a.a.createElement(c.a,{dataSource:n.list,className:"basic-table",style:oe.basicTable,hasBorder:!1},a.a.createElement(c.a.Column,{title:"\u7528\u6237",dataIndex:"userId",width:150,alignHeader:"left",align:"left"}),a.a.createElement(c.a.Column,{title:"\u65b9\u5f0f",dataIndex:"shared",width:120,alignHeader:"center",align:"center",cell:function e(t,n,r){return t?"\u63a8":"\u62c9"}}),a.a.createElement(c.a.Column,{title:"\u5f00\u59cb\u65f6\u95f4",dataIndex:"info",width:100,cell:function e(t,n,r){return g.a.formatUtcTime(t.startTime,0)}}),a.a.createElement(c.a.Column,{title:"\u7ed3\u675f\u65f6\u95f4",dataIndex:"info",width:100,cell:function e(t,n,r){return g.a.formatUtcTime(t.endTime,0)}}),a.a.createElement(c.a.Column,{title:"\u64cd\u4f5c",dataIndex:"operation",width:150,align:"center",cell:this.renderOperations})),a.a.createElement("div",{style:oe.paginationContainer},a.a.createElement(i.a,{current:n.currentPage,pageSize:n.pageSize,total:n.total,onChange:this.onChangeMediaPage.bind(this)})))}},{key:"render",value:function e(){return a.a.createElement(m.a,{style:oe.cardContainer},a.a.createElement("div",{style:{width:"95%",height:"95%"}},a.a.createElement("hr",null),this.renderRoomInfo(this.state.meeting),a.a.createElement("hr",null),this.renderEventList()),this.renderMediaList())}}]),t}(r.Component);ae.displayName="RoomInfo",ae.propTypes={},ae.defaultProps={};var oe={cardContainer:{padding:"10px 10px 20px 10px"},editDialog:{display:"inline-block",marginRight:"5px"},loading:{width:"100%"},header:{display:"flex",justifyContent:"space-between",borderBottom:"1px solid #999"},title:{fontSize:20,margin:0,paddingBottom:10},subTitle:{fontSize:16,fontWeight:"bold",margin:0,marginTop:"20px"},anchorCard:{marginTop:"10px",marginLeft:"20px",background:"#fff",overflow:"hidden",textOverflow:"ellipsis",borderRadius:"4px",display:"flex"},anchorAvatar:{display:"block"},anchorInfoBody:{position:"absolute",left:"0",right:"0",bottom:"0",width:"100%",textAlign:"center",fontSize:"12px"},infoItemBody:{display:"flex",margin:"11px 0"},infoItemLabel:{color:"#000",fontSize:"14px",fontWeight:"bold",marginRight:"2px",minWidth:"64px"},infoItemValue:{marginLeft:"5px",color:"#333",fontSize:"14px"},infoItemTitle:{float:"left",maxWidth:"240px",padding:"0 20px",fontSize:"14px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},infoItemPrice:{float:"right",width:"100px",textAlign:"right",color:"#fe5c38",fontSize:"20px",marginRight:"10px"},contentText:{display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"}};function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ue(e,t,n){return t&&ce(e.prototype,t),n&&ce(e,n),e}function se(e,t){return!t||"object"!==ie(t)&&"function"!=typeof t?fe(e):t}function fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function pe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}function ge(e,t){return(ge=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}n.d(t,"default",function(){return de});var de=function(e){function t(e){var n;return le(this,t),(n=se(this,me(t).call(this,e))).state={},n}return pe(t,e),ue(t,[{key:"render",value:function e(){return a.a.createElement("div",{className:"RoomList-page"},a.a.createElement(ae,null))}}]),t}(r.Component)},760:function(e,t,n){"use strict";n.d(t,"k",function(){return g}),n.d(t,"f",function(){return d}),n.d(t,"d",function(){return h}),n.d(t,"g",function(){return y}),n.d(t,"h",function(){return b}),n.d(t,"c",function(){return E}),n.d(t,"a",function(){return S}),n.d(t,"l",function(){return x}),n.d(t,"e",function(){return w}),n.d(t,"i",function(){return O}),n.d(t,"j",function(){return I}),n.d(t,"b",function(){return T});var r=n(42),a=n.n(r),o=n(129),i=n.n(o),l=n(764),c=n.n(l),u=n(160);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}var f=[],m=[],p=[],g=function e(t){a.a.get("/rimpmanage/roomList").then(function(e){var n=e.data;"SUCCESS"===(n=n.response).returncode?(t(n),"object"==s(n.meetings.meeting)&&(f=n.meetings.meeting.constructor!=Array?[n.meetings.meeting]:f)):(f=[],t(null)),sessionStorage.setItem("meetingsData",JSON.stringify(f))}).catch(function(e){console.log("fetch course appprove list error.",e),t(null)})},d=function e(t){a.a.get("/rimpmanage/roomList/historyRoomList").then(function(e){var n=e.data;m=n,t(n),sessionStorage.setItem("historyMeetings",JSON.stringify(m))}).catch(function(e){console.log("getHistoryMeetingsfromServer list error.",e),t(null)})},h=function e(t,n){a.a.get("/rimpmanage/eventList?meetId="+t).then(function(e){var t=e.data;n(t)}).catch(function(e){console.log("getEventsfromServer error.",e),n(null)})},y=function e(t,n){a.a.post("/rimpmanage/mediaInfo/getMediaInfo",t).then(function(e){var t=e.data;n(t)}).catch(function(e){console.log("getEventsfromServer error.",e),n(null)})},v=function e(t){return new Promise(function(e,n){a.a.post("/rimpmanage/DeviceInfo/processesRestartInfo",t).then(function(t){var n=t.data;e(n)}).catch(function(e){console.log("getProcessRestartInfo error.",e),n(e)})})},b=function e(t,n){a.a.post("/rimpmanage/mediaInfo/mediaServers",t).then(function(e){var t=e.data;n(t)}).catch(function(e){console.log("getEventsfromServer error.",e),n(null)})},E=function e(t){a.a.get("/rimpmanage/DeviceInfo").then(function(e){var n=e.data;t(n),p=n,sessionStorage.setItem("DeviceInfo",JSON.stringify(n))}).catch(function(e){console.log("getDeviceInfosfromServer error.",e),t(null)})},S=function e(t,n){a.a.post("/rimpmanage/countInfo",t).then(function(e){var t=e.data;n(t)}).catch(function(e){console.log("getCountInfosfromServer error.",e),n(null)})},x=function e(t,n){a.a.post("/rimpmanage/countInfo/processRestartEvent",t).then(function(e){var t=e.data;n(t)}).catch(function(e){console.log("geProcessRestartEvent error.",e),n(null)})},w=function e(t){var n=null,r=[];if(m.length<=0){var a=sessionStorage.getItem("historyMeetings");r=JSON.parse(a)}else r=m;return r.forEach(function(e){e.meetId==t&&(n=e)}),n},O=function e(t){var n=null,r=[];if(f.length<=0){var a=sessionStorage.getItem("meetingsData");r=JSON.parse(a)}else r=f;return r.forEach(function(e){e.internalMeetingID==t&&(n=e)}),n},P=function e(t,n){var r=null,a=[];if(f.length<=0){var o=sessionStorage.getItem("meetingsData");a=JSON.parse(o)}else a=f;return a.forEach(function(e){var a;e.voiceBridge.toString()===t&&u.a.tranObjToArr(e.attendees.attendee).forEach(function(e){e.userID===n&&(r=e.fullName)})}),r},I=function e(t){var n=[];if(f.length<=0){var r=sessionStorage.getItem("meetingsData");n=JSON.parse(r)}else n=f;var a="";return n.forEach(function(e){e.voiceBridge.toString()===t&&(a=e.meetingName)}),a},T=function e(t){var n=null,r=[];if(p.length<=0){var a=sessionStorage.getItem("deviceInfo");r=JSON.parse(a)}else r=p;return null==r?null:(r.forEach(function(e){e.hostname===t&&(n=e)}),n)},C=g},761:function(e,t,n){"use strict";var r=n(14),a=n.n(r),o={dateFormat:function e(t,n){var r={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?r[a]:("00"+r[a]).substr((""+r[a]).length)));return t},formatUtcTime:function e(t,n){void 0===n&&(n=0);var r=null,o="\u2014";if(r=new Date(t)){var i=a()(r.getTime()+6e4*n);o=i?i.format("YYYY-MM-DD HH:mm:ss"):{convertTime:t}+" "+{offset:n}}else o={convertTime:t}+" "+{offset:n};return o},getTimeBeforeDays:function e(t){return t<1?0:new Date((new Date).setHours(0,0,0,0)).getTime()-24*(t-1)*60*60*1e3;var n,r}};t.a=o},763:function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(761);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(n,!0).forEach(function(t){c(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){return e?o.a.formatUtcTime(e,0):a.a.createElement("span",{style:l({},s.contentText)},"No Time")}var s={contentText:{display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"}};t.a=u}}]);