(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1043:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),a=n(771),i=n(772),l=n(770),c=n(769),s=n(161),u=n.n(s),f=n(759),m=n(760),p=n(160),g=n(763),d,y={COURSE_TYPE_SIGNAL:0,COURSE_TYPE_SERIES_TITLE:1,COURSE_TYPE_SERIES_LESSON:2,COURSE_STATE_BANNED:6,COURSE_STATE_NO_STARTED:7,COURSE_STATE_LIVING:8,COURSE_STATE_FINISHED:9,COURSE_APPROVE_EXPIRED_TIMEOUT:864e5,COURSE_APPROVE_STATE_INIT:10,COURSE_APPROVE_STATE_APPROVING:11,COURSE_APPROVE_STATE_APPROVED:12,COURSE_APPROVE_STATE_REJECTED:13,COURSE_APPROVE_STATE_EXPIRE:14,COURSE_JUDGE_EXPIRE_TIME_VALID:"valid",COURSE_JUDGE_EXPIRE_TIME_INVALID:"invalid",COURSE_PRODUCT_SHELVES_UNRELEASED:0,COURSE_PRODUCT_SHELVES_RELEASED:1},h=n(14),E=n.n(h),b=n(131),S=n(41),v=n(318),O=n(294),T=n(112),D=n(25),I=n(163),_=n(55),w=n(309),P=n(132),C=n(162),R=n(60),x=n(310),j=n(165),L=n(311),N=n(166),M=n(42),A=n.n(M),U=n(129),Y=n.n(U);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t,n){return t&&J(e.prototype,t),n&&J(e,n),e}function B(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?G(e):t}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}function $(e,t){return($=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}var K=N.a.Panel,q=j.a.Item,W=R.a.Row,Q=R.a.Col,Z={0:"\u672a\u53d1\u5e03",1:"\u5df2\u53d1\u5e03"},ee={0:"\u5355\u70b9\u8bfe\u7a0b",1:"\u8bfe\u7a0b\u4e13\u8f91",2:"\u8fde\u7eed\u8bfe\u7a0b"},te=function(e){function t(e){var n;return V(this,t),(n=B(this,F(t).call(this,e))).searchSubmit=function(){n.field.validate(function(e,t){if(e)console.log("Errors in form!!!");else{if(t.endDate){var r=new Date(t.endDate);if(r){void 0===t.startDate&&(t.startDate=new E.a(new Date(0)));var o=new Date(t.startDate);console.log(o,r),t.startTime=t.startDate.format("YYYY-MM-DD HH:mm:ss"),t.duration=(r.getTime()-o.getTime())/6e4,t.duration<=0&&(n.field.setError("startTime","\u5f00\u59cb\u65f6\u95f4\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\u65f6\u95f4"),n.field.setError("endTime","\u5f00\u59cb\u65f6\u95f4\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\u65f6\u95f4"))}}else t.startDate&&(t.startTime=t.startDate.format("YYYY-MM-DD HH:mm:ss"));t.startDate=void 0,t.endDate=void 0,console.log("searchSubmit=>",t),n.props.onSubmit&&n.props.onSubmit(t)}})},n.searchReset=function(){n.field.reset()},n.fetchSchoolInfo=function(){var e={};A.a.post("/wisdomeducation/admin/getSchoolList.do",Y.a.stringify(e)).then(function(e){var t=e.data;0==t.code?void 0!==t.data&&n.setState({schoolList:t.data.map(function(e){return{label:e.chineseName,value:e.schoolId}})}):console.log("fetch school list failed.",t)}).catch(function(e){console.log("fetch school list error.",e)})},n.state={expandedKeys:[],schoolList:[]},n.field=new P.a(G(n)),n}return X(t,e),z(t,[{key:"componentDidMount",value:function e(){console.log("search >>> componentDidMount"),this.fetchSchoolInfo()}},{key:"render",value:function e(){var t=this.field.init,n=this.state.schoolList,r=o.a.createElement(Q,{xxs:"24",l:"8",style:ne.formCol},o.a.createElement(q,k({},ne.formItemLayout,{label:"\u6240\u5c5e\u5b66\u6821:"}),o.a.createElement(_.a,k({},t("schoolId"),{name:"schoolId",autoWidth:!1,dataSource:n,placeholder:"\u8bf7\u9009\u62e9"}))));return o.a.createElement(N.a,{defaultExpandedKeys:["0"]},o.a.createElement(K,{title:"\u641c\u7d22"},o.a.createElement(j.a,{field:this.field,labelTextAlign:"left"},o.a.createElement(W,{wrap:!0},o.a.createElement(Q,{xxs:"24",l:"8",style:ne.formCol},o.a.createElement(q,k({},ne.formItemLayout,{label:"\u8bfe\u7a0b\u540d\u79f0:"}),o.a.createElement(D.a,k({},t("courseName"),{style:{width:"100%"}})))),o.a.createElement(Q,{xxs:"24",l:"8",style:ne.formCol},o.a.createElement(q,k({},ne.formItemLayout,{label:"\u6388\u8bfe\u6559\u5e08:"}),o.a.createElement(D.a,t("teacherName")))),o.a.createElement(Q,{xxs:"24",l:"8",style:ne.formCol},o.a.createElement(q,k({},ne.formItemLayout,{label:"\u53d1\u5e03\u72b6\u6001:"}),o.a.createElement(_.a,k({name:"releaseState",style:{width:"100%"}},t("releaseState"),{dataSource:p.a.generateMapToArray(Z,"value","label")})))),o.a.createElement(Q,{xxs:"24",l:"8",style:ne.formCol},o.a.createElement(q,k({},ne.formItemLayout,{label:"\u6388\u8bfe\u65f6\u95f4:"}),o.a.createElement(O.a,k({},t("startDate"),{format:"YYYY-MM-DD",showTime:{secondStep:10,format:"HH:mm"}})))),o.a.createElement(Q,{xxs:"24",l:"8",style:ne.formCol},o.a.createElement(q,k({},ne.formItemLayout,{label:"\u7ed3\u675f\u65f6\u95f4:"}),o.a.createElement(O.a,k({},t("endDate"),{format:"YYYY-MM-DD",showTime:{secondStep:10,format:"HH:mm"}})))),o.a.createElement(Q,{xxs:"24",l:"8",style:ne.formCol},o.a.createElement(q,k({},ne.formItemLayout,{label:"\u8bfe\u7a0b\u7c7b\u578b:"}),o.a.createElement(_.a,k({name:"courseType",style:{width:"100%"}},t("courseType"),{dataSource:p.a.generateMapToArray(ee,"value","label")})))),void 0===n||!n||n.length<=1?"":r,o.a.createElement(Q,{xxs:"24",l:"8",style:ne.formCol},o.a.createElement(S.a,{onClick:this.searchSubmit,type:"primary",style:{marginLeft:30}},"\u641c\u7d22"),"\xa0\xa0\xa0",o.a.createElement(S.a,{onClick:this.searchReset,type:"primary"},"\u91cd\u7f6e"))))))}}]),t}(r.Component);te.displayName="RoomSearch",te.propTypes={},te.defaultProps={};var ne={formCol:{display:"flex",alignItems:"left"},label:{lineHeight:"28px",paddingRight:"10px"},formItemLayout:{labelCol:{fixedSpan:4},wrapperCol:{span:22}}},re=n(761);function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(n,!0).forEach(function(t){le(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ue(e,t,n){return t&&se(e.prototype,t),n&&se(e,n),e}function fe(e,t){return!t||"object"!==oe(t)&&"function"!=typeof t?pe(e):t}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ge(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}function de(e,t){return(de=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}var ye=function(e){function t(e){var n;return ce(this,t),(n=fe(this,me(t).call(this,e))).fetchMeetingsListData=function(e){var t=pe(n),r=n.state.tableData;t.setLoadingVisible(!0),Object(m.k)(function(t){if(null!=t&&"SUCCESS"===t.returncode){var o=[];p.a.ganerateListFromTree(t.meetings.meeting,o,1),r.total=o.length,r.currentPage=e,r.org=t.meetings.meeting;var a=(e-1)*r.pageSize,i=r.pageSize*e,l=[];if(o.length>a)for(var c=a;c<i&&void 0!==o[c];c++)l.push(o[c]);r.list=l,n.setState({tableData:r,isLoading:!1})}else r.total=0,r.currentPage=1,r.org=[],r.list=[],n.setState({tableData:r,isLoading:!1}),console.log("fetch course appprove list failed.",t)})},n.renderConvertTime=function(e,t){return e?re.a.formatUtcTime(e,0):o.a.createElement("span",{style:ie({},he.contentText)},value)},n.renderCourseSeriesName=function(e,t,n){if(!n||n<=1)return o.a.createElement("div",{style:he.titleCol},o.a.createElement("span",{style:he.titleText},t.meetingName))},n.getFormValues=function(){n.fetchMeetingsListData(n.state.tableData.currentPage)},n.renderCourseNameTitle=function(e,t,r){return n.renderCourseSeriesName(t,r,r.depth)},n.renderOperations=function(e,t,n){return o.a.createElement("div",{className:"operation-table-operation",style:he.operationTable},o.a.createElement(f.a,{to:"/roomInfo?meetingId="+n.internalMeetingID,className:he.action},"\u67e5\u770b\u8be6\u60c5"))},n.setLoadingVisible=function(e){n.setState({isLoading:e})},n.renderReleaseState=function(e){return!0===e?o.a.createElement("label",{inverse:!1,status:"default"},"\u662f"):o.a.createElement("label",{inverse:!1,status:"default"},"\u5426")},n.onChangePage=function(e){n.fetchMeetingsListData(e)},n.state={tableData:{org:[],total:0,pageSize:8,currentPage:1,list:[]},isLoading:!1},n}return ge(t,e),ue(t,[{key:"componentDidMount",value:function e(){this.fetchMeetingsListData(1)}},{key:"render",value:function e(){var t=this.state,n=t.tableData,r=t.isLoading;return o.a.createElement("div",{className:"operation-table"},o.a.createElement(u.a,{style:he.cardContainer},o.a.createElement(c.a,{dataSource:n.list,loading:r,className:"basic-table",style:he.basicTable,hasBorder:!1},o.a.createElement(c.a.Column,{title:"\u623f\u95f4\u540d\u79f0",cell:this.renderCourseNameTitle,width:200,alignHeader:"left",align:"center"}),o.a.createElement(c.a.Column,{title:"\u53c2\u52a0\u4eba\u6570",dataIndex:"participantCount",width:120,alignHeader:"center",align:"center"}),o.a.createElement(c.a.Column,{title:"\u4e0a\u884c\u5a92\u4f53\u6d41\u6570",dataIndex:"videoCount",width:120}),o.a.createElement(c.a.Column,{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createTime",width:150,alignHeader:"center",align:"center",cell:function e(t,n,r){return Object(g.a)(r.createTime,0)}}),o.a.createElement(c.a.Column,{title:"\u5f55\u5236\u72b6\u6001",dataIndex:"createTime",width:85,alignHeader:"center",align:"center",cell:this.renderReleaseState}),o.a.createElement(c.a.Column,{title:"\u8fd0\u884c\u72b6\u6001",width:85,dataIndex:"running",align:"center",cell:this.renderReleaseState}),o.a.createElement(c.a.Column,{title:"\u64cd\u4f5c",dataIndex:"operation",width:150,align:"center",cell:this.renderOperations})),o.a.createElement("div",{style:he.paginationContainer},o.a.createElement(i.a,{current:n.currentPage,pageSize:n.pageSize,total:n.total,onChange:this.onChangePage}))))}}]),t}(r.Component);ye.displayName="RoomListInfo",ye.propTypes={},ye.defaultProps={};var he={cardContainer:{padding:"10px 10px 20px 10px"},titleCol:{display:"flex",flexDirection:"row"},titleText:{marginLeft:"10px",lineHeight:"20px",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"},paginationContainer:{textAlign:"right",paddingTop:"26px"}};function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e,t,n){return t&&Se(e.prototype,t),n&&Se(e,n),e}function Oe(e,t){return!t||"object"!==Ee(t)&&"function"!=typeof t?Te(e):t}function Te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Ie(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_e(e,t)}function _e(e,t){return(_e=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}n.d(t,"default",function(){return we});var we=function(e){function t(e){var n;return be(this,t),(n=Oe(this,De(t).call(this,e))).state={},n}return Ie(t,e),ve(t,[{key:"render",value:function e(){return o.a.createElement("div",{className:"RoomList-page"},o.a.createElement(ye,null))}}]),t}(r.Component)},760:function(e,t,n){"use strict";n.d(t,"k",function(){return g}),n.d(t,"f",function(){return d}),n.d(t,"d",function(){return y}),n.d(t,"g",function(){return h}),n.d(t,"h",function(){return b}),n.d(t,"c",function(){return S}),n.d(t,"a",function(){return v}),n.d(t,"l",function(){return O}),n.d(t,"e",function(){return T}),n.d(t,"i",function(){return D}),n.d(t,"j",function(){return _}),n.d(t,"b",function(){return w});var r=n(42),o=n.n(r),a=n(129),i=n.n(a),l=n(764),c=n.n(l),s=n(160);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}var f=[],m=[],p=[],g=function e(t){o.a.get("/rimpmanage/roomList").then(function(e){var n=e.data;"SUCCESS"===(n=n.response).returncode?(t(n),"object"==u(n.meetings.meeting)&&(f=n.meetings.meeting.constructor!=Array?[n.meetings.meeting]:f)):(f=[],t(null)),sessionStorage.setItem("meetingsData",JSON.stringify(f))}).catch(function(e){console.log("fetch course appprove list error.",e),t(null)})},d=function e(t){o.a.get("/rimpmanage/roomList/historyRoomList").then(function(e){var n=e.data;m=n,t(n),sessionStorage.setItem("historyMeetings",JSON.stringify(m))}).catch(function(e){console.log("getHistoryMeetingsfromServer list error.",e),t(null)})},y=function e(t,n){o.a.get("/rimpmanage/eventList?meetId="+t).then(function(e){var t=e.data;n(t)}).catch(function(e){console.log("getEventsfromServer error.",e),n(null)})},h=function e(t,n){o.a.post("/rimpmanage/mediaInfo/getMediaInfo",t).then(function(e){var t=e.data;n(t)}).catch(function(e){console.log("getEventsfromServer error.",e),n(null)})},E=function e(t){return new Promise(function(e,n){o.a.post("/rimpmanage/DeviceInfo/processesRestartInfo",t).then(function(t){var n=t.data;e(n)}).catch(function(e){console.log("getProcessRestartInfo error.",e),n(e)})})},b=function e(t,n){o.a.post("/rimpmanage/mediaInfo/mediaServers",t).then(function(e){var t=e.data;n(t)}).catch(function(e){console.log("getEventsfromServer error.",e),n(null)})},S=function e(t){o.a.get("/rimpmanage/DeviceInfo").then(function(e){var n=e.data;t(n),p=n,sessionStorage.setItem("DeviceInfo",JSON.stringify(n))}).catch(function(e){console.log("getDeviceInfosfromServer error.",e),t(null)})},v=function e(t,n){o.a.post("/rimpmanage/countInfo",t).then(function(e){var t=e.data;n(t)}).catch(function(e){console.log("getCountInfosfromServer error.",e),n(null)})},O=function e(t,n){o.a.post("/rimpmanage/countInfo/processRestartEvent",t).then(function(e){var t=e.data;n(t)}).catch(function(e){console.log("geProcessRestartEvent error.",e),n(null)})},T=function e(t){var n=null,r=[];if(m.length<=0){var o=sessionStorage.getItem("historyMeetings");r=JSON.parse(o)}else r=m;return r.forEach(function(e){e.meetId==t&&(n=e)}),n},D=function e(t){var n=null,r=[];if(f.length<=0){var o=sessionStorage.getItem("meetingsData");r=JSON.parse(o)}else r=f;return r.forEach(function(e){e.internalMeetingID==t&&(n=e)}),n},I=function e(t,n){var r=null,o=[];if(f.length<=0){var a=sessionStorage.getItem("meetingsData");o=JSON.parse(a)}else o=f;return o.forEach(function(e){var o;e.voiceBridge.toString()===t&&s.a.tranObjToArr(e.attendees.attendee).forEach(function(e){e.userID===n&&(r=e.fullName)})}),r},_=function e(t){var n=[];if(f.length<=0){var r=sessionStorage.getItem("meetingsData");n=JSON.parse(r)}else n=f;var o="";return n.forEach(function(e){e.voiceBridge.toString()===t&&(o=e.meetingName)}),o},w=function e(t){var n=null,r=[];if(p.length<=0){var o=sessionStorage.getItem("deviceInfo");r=JSON.parse(o)}else r=p;return null==r?null:(r.forEach(function(e){e.hostname===t&&(n=e)}),n)},P=g},761:function(e,t,n){"use strict";var r=n(14),o=n.n(r),a={dateFormat:function e(t,n){var r={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};for(var o in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?r[o]:("00"+r[o]).substr((""+r[o]).length)));return t},formatUtcTime:function e(t,n){void 0===n&&(n=0);var r=null,a="\u2014";if(r=new Date(t)){var i=o()(r.getTime()+6e4*n);a=i?i.format("YYYY-MM-DD HH:mm:ss"):{convertTime:t}+" "+{offset:n}}else a={convertTime:t}+" "+{offset:n};return a},getTimeBeforeDays:function e(t){return t<1?0:new Date((new Date).setHours(0,0,0,0)).getTime()-24*(t-1)*60*60*1e3;var n,r}};t.a=a},763:function(e,t,n){"use strict";var r=n(1),o=n.n(r),a=n(761);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(n,!0).forEach(function(t){c(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){return e?a.a.formatUtcTime(e,0):o.a.createElement("span",{style:l({},u.contentText)},"No Time")}var u={contentText:{display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"}};t.a=s}}]);